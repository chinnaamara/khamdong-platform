//
   Created by chinna on 5/9/14.

section.container
    .row
        .col-lg-12
            .panel.panel-primary
                .panel-heading Users
                .panel-body
                    .loader-div(ng-show='loading')
                        h4 Loading, Please wait...
                    .main-div(ng-show="loadDone")
                        .col-xs-4.pull-left
                            a.btn.btn-info.pull-left(href="", data-toggle="modal",id='btn-sendSms', data-target="#smsWindow", ng-click="isUser()", ng-disabled='cantSendMessage')
                                i.glyphicon.glyphicon-send
                                |   Send Messsage
                        .col-xs-4.pull-right
                            input(type="search", class="form-control", ng-model="filter.$", placeholder="search user")
                        br
                        br
                        .table-responsive
                            table#usersTable(class="table table-striped table-bordered table-condensed", ng-table='tableParams')
                                thead
                                    tr
                                        th.checkboxes
                                            input#allUsersCheck.checkbox-inline(type='checkbox', name='checkAll', ng-model='selectedAll', ng-click='allUsersClicked()', ng-checked='allUsersMet()')
                                        th User Id
                                        th User Name
                                        th Mobile Number
                                        th Ward
                                        th Role
                                        th Email
                                tbody
                                    tr(ng-repeat='user in $data | orderByPriority | orderBy : predicate')
                                        td.checkboxes
                                            input.userCheck.checkbox-inline(type='checkbox', ng-model='user.done')
                                        td
                                            span {{ user.id }}
                                        td
                                            span {{ user.name }}
                                        td
                                            span {{ user.mobileNumber }}
                                        td
                                            span {{ user.ward }}
                                        td
                                            span {{ user.role }}
                                        td
                                            span {{ user.email }}

#smsWindow.modal.fade.bs-example-modal-lg(tabindex='-1', role='dialog', aria-labelledby='myLargeModalLabel', aria-hidden='true')
    .modal-dialog
        .modal-content
            .modal-header.bg-primary
                | Send SMS
                //button.close(type='button btn-primary', data-dismiss='modal' data-target='.bs-example-modal-lg')
                //    span(aria-hidden='true') Ã—
                //    span.sr-only Close
            .modal-body
                form#messageForm(name='messageForm',class='form-horizonal',type='form',novalidate)
                    .form-group.has-warning
                        label.control-label(for='message')
                            | Message
                            span(class='star-label') *
                        div
                            textarea#message.form-control(name='message',ng-model='messageText', maxlength='140', placeholder='Type message here..', required)
                            small(class="label label-danger",ng-show="messageForm.message.$invalid && messageForm.message.$dirty") !.Reuired message not more than 140 characters.
                    .form-group.has-warning
                        .alert.alert-success(ng-show='successMessage')
                            i.fa.fa-check-circle-o
                                | Message sent success to selected members.!
            .modal-footer
                button.btn.btn-primary.btn-sm(ng-click='sendSms()', ng-disabled='messageForm.$invalid')
                    i.glyphicon.glyphicon-send
                    |   Send
                button.btn.btn-warning.btn-sm(data-dismiss='modal', ng-click='reset()')
                    i.glyphicon.glyphicon-remove
                    |   Cancel
